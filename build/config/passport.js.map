{"version":3,"sources":["../../config/passport.js"],"names":["LocalStrategy","require","Strategy","passport","use","usernameField","passwordField","username","password","done","User","findOne","err","user","message","validPassword"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAMA,gBAAgBC,QAAQ,gBAAR,EAA0BC,QAAhD;;AAEAC,mBAASC,GAAT,CACE,IAAIJ,aAAJ,CACE;AACEK,iBAAe,aADjB;AAEEC,iBAAe;AAFjB,CADF,EAKG,UAACC,QAAD,EAAWC,QAAX,EAAqBC,IAArB,EAA8B;AAC7BC,mBAAKC,OAAL,CAAa,EAAEJ,kBAAF,EAAb,EAA2B,UAACK,GAAD,EAAMC,IAAN,EAAe;AACxC,QAAID,GAAJ,EAAS;AAAE,aAAOH,KAAKG,GAAL,CAAP;AAAmB;AAC9B,QAAI,CAACC,IAAL,EAAW;AACT,aAAOJ,KAAK,IAAL,EAAW,KAAX,EAAkB,EAAEK,SAAS,qBAAX,EAAlB,CAAP;AACD;AACD,QAAI,CAACD,KAAKE,aAAL,CAAmBP,QAAnB,CAAL,EAAmC;AACjC,aAAOC,KAAK,IAAL,EAAW,KAAX,EAAkB,EAAEK,SAAS,qBAAX,EAAlB,CAAP;AACD;AACD,WAAOL,KAAK,IAAL,EAAWI,IAAX,CAAP;AACD,GATD;AAUD,CAhBH,CADF","file":"passport.js","sourcesContent":["import passport from 'passport';\nimport User from '../models';\n\nconst LocalStrategy = require('passport-local').Strategy;\n\npassport.use(\n  new LocalStrategy(\n    {\n      usernameField: 'user[email]',\n      passwordField: 'user[password]'\n    },\n    ((username, password, done) => {\n      User.findOne({ username }, (err, user) => {\n        if (err) { return done(err); }\n        if (!user) {\n          return done(null, false, { message: 'Incorrect username.' });\n        }\n        if (!user.validPassword(password)) {\n          return done(null, false, { message: 'Incorrect password.' });\n        }\n        return done(null, user);\n      });\n    })\n  ));\n"]}